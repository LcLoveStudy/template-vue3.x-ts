import{d as V,aA as b,aI as q,aB as C,r,w as B,o as H,A as U,ah as x,a as S,c as I,I as n,u as c,O as L,P as E,V as p,U as $,K as A,aF as F,aG as P,D as R,T as k,F as T}from"./vue-fd42cc31.js";import{_ as O}from"./index-9125d0da.js";import{H as z}from"./index-5d32484c.js";import{_ as D}from"./how-to-use-table.vue_vue_type_script_setup_true_lang-db6d4484.js";import{E as G}from"./elementPlus-1b4bb05b.js";import"./leaflet-0b2bee73.js";import"./elementIcons-b7f5cfb3.js";const J=a=>(F("data-v-1d1daba2"),a=a(),P(),a),K={class:"slider_verify_box"},j=J(()=>n("div",{class:"fail_bar"},null,-1)),Q=V({__name:"index",props:b({width:{type:String,default:"250px"}},{status:{type:Boolean,default:!1},statusModifiers:{}}),emits:b(["onSuccess"],["update:status"]),setup(a,{expose:v,emit:i}){q(o=>({"48107fd8":a.width}));const _=C(a,"status"),g=i,s=r(!1),u=r(!1),e=r();let d=0,f=0;const w=o=>{var t;(t=e.value)!=null&&t.contains(o.target)&&(f=o.x,u.value=!0)},m=()=>{if(u.value){const o=document.querySelector(".slider_verify_box");u.value=!1,f=0,e.value.style.left!==(o==null?void 0:o.clientWidth)-e.value.clientWidth+"px"?(document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px"):s.value=!0}},y=o=>{const t=document.querySelector(".slider_verify_box");if(t!=null&&t.contains(o.target)){if(u.value){const l=o.x-d-(f-d),h=document.querySelector(".fail_bar");h.style.left=l+e.value.clientWidth+"px",l<=0?(s.value=!1,e.value.style.left="0px"):l>=(t==null?void 0:t.clientWidth)-e.value.clientWidth-10?(s.value=!0,e.value.style.left=(t==null?void 0:t.clientWidth)-e.value.clientWidth+"px"):(s.value=!1,e.value.style.left=l+"px")}}else m()},M=()=>{document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px",s.value=!1};B(()=>s.value,()=>{s.value?(window.removeEventListener("mousedown",w),window.removeEventListener("mouseup",m),window.removeEventListener("mousemove",y),_.value=!0,g("onSuccess")):(window.addEventListener("mousedown",w),window.addEventListener("mouseup",m),window.addEventListener("mousemove",y),_.value=!1)});const N=()=>{window.addEventListener("mousedown",w),window.addEventListener("mouseup",m),window.addEventListener("mousemove",y)};return H(()=>{e.value=document.querySelector(".slider_rocker"),d=e.value.getBoundingClientRect().x,N()}),v({name:"SliderVerify",reset:M}),U(()=>{window.removeEventListener("mousedown",w),window.removeEventListener("mouseup",m),window.removeEventListener("mousemove",y)}),(o,t)=>{const l=x("SwitchButton"),h=x("el-icon"),W=x("Select");return S(),I("div",K,[n("div",{ref_key:"rockerDom",ref:e,class:"slider_rocker"},[c(s)?(S(),L(h,{key:1},{default:E(()=>[p(W)]),_:1})):(S(),L(h,{key:0},{default:E(()=>[p(l)]),_:1}))],512),j,n("span",{class:"verify_tip",style:A({color:c(s)?"#fff":"#000"})},$(c(s)?"验证通过":"请按住滑块拖动"),5)])}}});const X=O(Q,[["__scopeId","data-v-1d1daba2"]]),Y={class:"flex items-center"},Z=n("h3",{class:"mt-6"},"示例",-1),ee=n("pre",{class:"w-200"},[k("    "),n("code",{class:"language-html text-sm"},'\n    <SliderVerify ref="slider" v-model:status="status" @on-success="successHandler"/>\n    <el-button class="ml-[1rem]" @click="resetVerify"/>重置</el-button/>\n    <script setup lang="ts">\n      const slider = ref()\n      const status = ref(false)\n      const successHandler = () => {\n        ElMessage.success(\'验证成功\')\n      }\n      const resetVerify = () => {\n        slider.value.reset()\n      }\n    <\/script>\n    '),k("\n  ")],-1),ce=V({__name:"slider-verify",setup(a){H(()=>{z.highlightAll()});const v=r(),i=r(!1),_=()=>{G.success("验证成功")},g=()=>{v.value.reset()},s=r([{propName:"v-model:status",mean:"验证状态",type:"boolean",default:"false"},{propName:"width",mean:"组件宽度,最小180px",type:"string",default:"250px"},{propName:"@on-success",mean:"验证成功时触发",type:"function",default:"-"},{propName:"reset",mean:"组件方法,重置状态(获取组件dom,调用reset方法)",type:"function",default:"-"}]);return(u,e)=>{const d=x("el-button");return S(),I(T,null,[n("div",Y,[p(c(X),{ref_key:"slider",ref:v,status:c(i),"onUpdate:status":e[0]||(e[0]=f=>R(i)?i.value=f:null),onOnSuccess:_},null,8,["status"]),p(d,{class:"ml-[1rem]",onClick:g},{default:E(()=>[k("重置")]),_:1})]),Z,ee,p(D,{"how-to-use":c(s)},null,8,["how-to-use"])],64)}}});export{ce as default};
