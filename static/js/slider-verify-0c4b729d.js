import{x as V,aA as b,aG as C,aB as B,r as a,h as U,k as H,W as A,ag as x,y as g,z as M,A as n,u as r,G as L,H as E,P as m,M as I,D as P,l as R,L as k,O as $}from"./vue-44be93b5.js";import{_ as z}from"./index-00940a4f.js";import{H as G}from"./index-18c84092.js";import{_ as O}from"./how-to-use-table.vue_vue_type_script_setup_true_lang-0ceac32c.js";import{E as T}from"./elementPlus-69cd9210.js";import"./elementIcons-bf6bd1cc.js";const D={class:"slider_verify_box"},F=V({__name:"index",props:b({width:{type:String,default:"250px"}},{status:{type:Boolean,default:!1},statusModifiers:{}}),emits:b(["onSuccess"],["update:status"]),setup(S,{expose:v,emit:u}){C(o=>({"48107fd8":S.width}));const p=B(S,"status"),h=u,s=a(!1),i=a(!1),e=a();let c=0,d=0;const _=o=>{var t;(t=e.value)!=null&&t.contains(o.target)&&(d=o.x,i.value=!0)},f=()=>{if(i.value){const o=document.querySelector(".slider_verify_box");i.value=!1,d=0,e.value.style.left!==(o==null?void 0:o.clientWidth)-e.value.clientWidth+"px"?(document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px"):s.value=!0}},y=o=>{const t=document.querySelector(".slider_verify_box");if(t!=null&&t.contains(o.target)){if(i.value){const l=o.x-c-(d-c),w=document.querySelector(".fail_bar");w.style.left=l+e.value.clientWidth+"px",l<=0?(s.value=!1,e.value.style.left="0px"):l>=(t==null?void 0:t.clientWidth)-e.value.clientWidth-10?(s.value=!0,e.value.style.left=(t==null?void 0:t.clientWidth)-e.value.clientWidth+"px"):(s.value=!1,e.value.style.left=l+"px")}}else f()},W=()=>{document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px",s.value=!1};U(()=>s.value,()=>{s.value?(window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",y),p.value=!0,h("onSuccess")):(window.addEventListener("mousedown",_),window.addEventListener("mouseup",f),window.addEventListener("mousemove",y),p.value=!1)});const N=()=>{window.addEventListener("mousedown",_),window.addEventListener("mouseup",f),window.addEventListener("mousemove",y)};return H(()=>{e.value=document.querySelector(".slider_rocker"),c=e.value.getBoundingClientRect().x,N()}),v({name:"SliderVerify",reset:W}),A(()=>{window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",y)}),(o,t)=>{const l=x("SwitchButton"),w=x("el-icon"),q=x("Select");return g(),M("div",D,[n("div",{ref_key:"rockerDom",ref:e,class:"slider_rocker"},[r(s)?(g(),L(w,{key:1},{default:E(()=>[m(q)]),_:1})):(g(),L(w,{key:0},{default:E(()=>[m(l)]),_:1}))],512),t[0]||(t[0]=n("div",{class:"fail_bar"},null,-1)),n("span",{class:"verify_tip",style:P({color:r(s)?"#fff":"#000"})},I(r(s)?"验证通过":"请按住滑块拖动"),5)])}}});const J=z(F,[["__scopeId","data-v-1d1daba2"]]),j={class:"flex items-center"},te=V({__name:"slider-verify",setup(S){H(()=>{G.highlightAll()});const v=a(),u=a(!1),p=()=>{T.success("验证成功")},h=()=>{v.value.reset()},s=a([{propName:"v-model:status",mean:"验证状态",type:"boolean",default:"false"},{propName:"width",mean:"组件宽度,最小180px",type:"string",default:"250px"},{propName:"@on-success",mean:"验证成功时触发",type:"function",default:"-"},{propName:"reset",mean:"组件方法,重置状态(获取组件dom,调用reset方法)",type:"function",default:"-"}]);return(i,e)=>{const c=x("el-button");return g(),M($,null,[n("div",j,[m(r(J),{ref_key:"slider",ref:v,status:r(u),"onUpdate:status":e[0]||(e[0]=d=>R(u)?u.value=d:null),onOnSuccess:p},null,8,["status"]),m(c,{class:"ml-[1rem]",onClick:h},{default:E(()=>e[1]||(e[1]=[k("重置")])),_:1})]),e[2]||(e[2]=n("h3",{class:"mt-6"},"示例",-1)),e[3]||(e[3]=n("pre",{class:"w-200"},[k("    "),n("code",{class:"language-html text-sm"},'\n    <SliderVerify ref="slider" v-model:status="status" @on-success="successHandler"/>\n    <el-button class="ml-[1rem]" @click="resetVerify"/>重置</el-button/>\n    <script setup lang="ts">\n      const slider = ref()\n      const status = ref(false)\n      const successHandler = () => {\n        ElMessage.success(\'验证成功\')\n      }\n      const resetVerify = () => {\n        slider.value.reset()\n      }\n    <\/script>\n    '),k("\n  ")],-1)),m(O,{"how-to-use":r(s)},null,8,["how-to-use"])],64)}}});export{te as default};
