import{u as N,g as P,o as H,a as O,b as V,f as z,B as A,w as j,e as E,E as D,G as $,T as J,J as U,ai as X,U as _,O as q,H as I,S as F,F as L}from"./vue-53114f36.js";import{H as M}from"./index-caeea40e.js";import{_ as R}from"./how-to-use-table.vue_vue_type_script_setup_true_lang-6878eeb8.js";import"./elementPlus-cc3ede7a.js";import"./elementIcons-66a3c92f.js";const K=e=>e===null?"null":e===void 0?"undefined":Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Y(e){return P()?(H(e),!0):!1}function i(e){return typeof e=="function"?e():N(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Z(e,r=!1,a="Timeout"){return new Promise((o,u)=>{setTimeout(r?()=>u(a):o,e)})}function W(e){return e}const ee={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]},te=Object.assign({},{linear:W},ee);function ne([e,r,a,o]){const u=(t,n)=>1-3*n+3*t,s=(t,n)=>3*n-6*t,c=t=>3*t,f=(t,n,l)=>((u(n,l)*t+s(n,l))*t+c(n))*t,d=(t,n,l)=>3*u(n,l)*t*t+2*s(n,l)*t+c(n),p=t=>{let n=t;for(let l=0;l<4;++l){const m=d(n,e,a);if(m===0)return n;const y=f(n,e,a)-t;n-=y/m}return n};return t=>e===r&&a===o?t:f(p(t),r,o)}function Q(e,r,a){return e+a*(r-e)}function T(e){return(typeof e=="number"?[e]:e)||[]}function ae(e,r,a,o={}){var u,s;const c=i(r),f=i(a),d=T(c),p=T(f),t=(u=i(o.duration))!=null?u:1e3,n=Date.now(),l=Date.now()+t,m=typeof o.transition=="function"?o.transition:(s=i(o.transition))!=null?s:W,y=typeof m=="function"?m:ne(m);return new Promise(h=>{e.value=c;const x=()=>{var g;if((g=o.abort)!=null&&g.call(o)){h();return}const b=Date.now(),w=y((b-n)/t),v=T(e.value).map((G,S)=>Q(d[S],p[S],w));Array.isArray(e.value)?e.value=v.map((G,S)=>{var C,B;return Q((C=d[S])!=null?C:0,(B=p[S])!=null?B:0,w)}):typeof e.value=="number"&&(e.value=v[0]),b<l?requestAnimationFrame(x):(e.value=f,h())};x()})}function k(e,r={}){let a=0;const o=()=>{const s=i(e);return typeof s=="number"?s:s.map(i)},u=O(o());return V(o,async s=>{var c,f;if(i(r.disabled))return;const d=++a;if(r.delay&&await Z(i(r.delay)),d!==a)return;const p=Array.isArray(s)?s.map(i):i(s);(c=r.onStarted)==null||c.call(r),await ae(u,u.value,p,{...r,abort:()=>{var t;return d!==a||((t=r.abort)==null?void 0:t.call(r))}}),(f=r.onFinished)==null||f.call(r)},{deep:!0}),V(()=>i(r.disabled),s=>{s&&(a++,u.value=o())}),Y(()=>{a++}),z(()=>i(r.disabled)?o():u.value)}const re=A({name:"CountTo",__name:"index",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:2023},duration:{type:Number,default:1500},autoplay:{type:Boolean,default:!0},fontSize:{type:Number,default:16},fontWeight:{type:Number,default:400},decimals:{type:Number,default:0,validator(e){return e>=0}},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimal:{type:String,default:"."},color:{type:String}},emits:["onStarted","onFinished"],setup(e,{emit:r}){const a=e,o=r,u=O(a.startVal),s=O(!1);let c=k(u);const f=z(()=>t(N(c)));j(()=>{u.value=a.startVal}),V([()=>a.startVal,()=>a.endVal],()=>{a.autoplay&&d()}),E(()=>{a.autoplay&&d()});function d(){p(),u.value=a.endVal}function p(){c=k(u,{disabled:s,duration:a.duration,onFinished:()=>o("onFinished"),onStarted:()=>o("onStarted"),transition:te.linear})}function t(n){if(!n&&n!==0)return"";const{decimals:l,decimal:m,separator:y,suffix:h,prefix:x}=a;n=Number(n).toFixed(l),n+="";const g=n.split(".");let b=g[0];const w=g.length>1?m+g[1]:"",v=/(\d+)(\d{3})/;if(y&&K(y)!=="number")for(;v.test(b);)b=b.replace(v,"$1"+y+"$2");return x+b+w+h}return(n,l)=>(D(),$("span",{style:U({color:e.color,fontSize:e.fontSize+"px",fontWeight:e.fontWeight})},J(f.value),5))}}),ce=A({__name:"count-to-code",setup(e){E(()=>{M.highlightAll()});const r=O([{propName:"start-val",mean:"开始的值",type:"number",default:"0"},{propName:"end-val",mean:"目标值",type:"number",default:"2023"},{propName:"font-size",mean:"字体大小",type:"number",default:"16"},{propName:"font-weight",mean:"字体粗细",type:"number",default:"400"},{propName:"color",mean:"字体颜色",type:"string",default:"#000"},{propName:"duration",mean:"延续时间",type:"number",default:"1500"},{propName:"autoplay",mean:"是否自动播放",type:"boolean",default:"true"},{propName:"prefix",mean:"前缀",type:"string",default:"-"},{propName:"suffix",mean:"后缀",type:"string",default:"-"}]);return(a,o)=>{const u=X("el-card");return D(),$(L,null,[_(u,{class:"width-300"},{default:q(()=>[_(N(re),{"start-val":100,"end-val":2e3,color:"green","font-size":30,"font-weight":600,prefix:"$"})]),_:1}),o[0]||(o[0]=I("h3",{class:"mt-6"},"示例",-1)),o[1]||(o[1]=I("pre",{class:"w-200"},[F("    "),I("code",{class:"language-html text-sm"},'\n    <CountTo\n      :start-val="100"\n      :end-val="2000"\n      color="green"\n      :font-size="30"\n      :font-weight="600"\n      prefix="$"\n    />\n    '),F("\n  ")],-1)),_(R,{"how-to-use":N(r)},null,8,["how-to-use"])],64)}}});export{ce as default};
