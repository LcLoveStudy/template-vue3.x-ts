import{x as B,aA as x,aG as I,aB as P,r as w,h as z,k as A,W as D,ag as y,y as p,z as G,A as _,u as h,G as W,H as k,P as b,M as N,D as R}from"./vue-44be93b5.js";import{_ as T}from"./index-58a6888e.js";const U={class:"slider_verify_box"},X=B({__name:"index",props:x({width:{type:String,default:"250px"}},{status:{type:Boolean,default:!1},statusModifiers:{}}),emits:x(["onSuccess"],["update:status"]),setup(E,{expose:g,emit:q}){I(n=>({"249ee50e":E.width}));const L=P(E,"status"),M=q,s=w(!1),o=w(!1),t=w();let r=0,a=0;const c=n=>{var e;(e=t.value)!=null&&e.contains(n.target)&&(a=n.x,o.value=!0)},u=()=>{if(t.value&&o.value){const n=document.querySelector(".slider_verify_box");if(o.value=!1,a=0,t.value.style.left!==(n==null?void 0:n.clientWidth)-t.value.clientWidth+"px"){const e=document.querySelector(".fail_bar");t.value.style.transition="all 0.5s",e.style.transition="all 0.5s",e.style.left="0px",t.value.style.left="0px",setTimeout(()=>{t.value&&(t.value.style.transition="none",e.style.transition="none")},500)}else s.value=!0}},v=n=>{const e=document.querySelector(".slider_verify_box");if(e!=null&&e.contains(n.target)){if(o.value){const l=n.x-r-(a-r),i=document.querySelector(".fail_bar");i.style.left=l+t.value.clientWidth+"px",l<=0?(s.value=!1,t.value.style.left="0px"):l>=(e==null?void 0:e.clientWidth)-t.value.clientWidth-10?(s.value=!0,t.value.style.left=(e==null?void 0:e.clientWidth)-t.value.clientWidth+"px"):(s.value=!1,t.value.style.left=l+"px")}}else u()},S=n=>{var e;return(e=t.value)==null?void 0:e.contains(n.target)},d=n=>{S(n)&&(a=n.touches[0].clientX,o.value=!0,n.preventDefault())},f=n=>{if(!o.value||!S(n))return;n.preventDefault();const e=document.querySelector(".slider_verify_box");if(e!=null&&e.contains(n.target)){const l=n.touches[0].clientX-r-(a-r),i=document.querySelector(".fail_bar");i.style.left=l+t.value.clientWidth+"px",l<=0?(s.value=!1,t.value.style.left="0px"):l>=(e==null?void 0:e.clientWidth)-t.value.clientWidth-10?(s.value=!0,t.value.style.left=(e==null?void 0:e.clientWidth)-t.value.clientWidth+"px"):(s.value=!1,t.value.style.left=l+"px")}},m=()=>{if(t.value&&o.value){o.value=!1,a=0;const n=document.querySelector(".slider_verify_box");if(t.value.style.left!==(n==null?void 0:n.clientWidth)-t.value.clientWidth+"px"){const e=document.querySelector(".fail_bar");t.value.style.transition="all 0.5s",e.style.transition="all 0.5s",e.style.left="0px",t.value.style.left="0px",setTimeout(()=>{t.value&&(t.value.style.transition="none",e.style.transition="none")},500)}else s.value=!0}},H=()=>{if(!t.value)return;const n=document.querySelector(".fail_bar");n&&(n.style.left="0px",t.value.style.left="0px",s.value=!1)};z(()=>s.value,()=>{s.value?(window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",u),window.removeEventListener("mousemove",v),window.removeEventListener("touchstart",d),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",m),L.value=!0,M("onSuccess")):(window.addEventListener("mousedown",c),window.addEventListener("mouseup",u),window.addEventListener("mousemove",v),window.addEventListener("touchstart",d),window.addEventListener("touchmove",f),window.addEventListener("touchend",m),L.value=!1)});const V=()=>{window.addEventListener("mousedown",c),window.addEventListener("mouseup",u),window.addEventListener("mousemove",v),window.addEventListener("touchstart",d,{passive:!1}),window.addEventListener("touchmove",f,{passive:!1}),window.addEventListener("touchend",m,{passive:!1})};return A(()=>{t.value=document.querySelector(".slider_rocker"),r=t.value.getBoundingClientRect().x,V()}),g({name:"SliderVerify",reset:H}),D(()=>{window.removeEventListener("mousedown",c),window.removeEventListener("mouseup",u),window.removeEventListener("mousemove",v),window.removeEventListener("touchstart",d),window.removeEventListener("touchmove",f),window.removeEventListener("touchend",m)}),(n,e)=>{const l=y("SwitchButton"),i=y("el-icon"),C=y("Select");return p(),G("div",U,[_("div",{ref_key:"rockerDom",ref:t,class:"slider_rocker"},[h(s)?(p(),W(i,{key:1},{default:k(()=>[b(C)]),_:1})):(p(),W(i,{key:0},{default:k(()=>[b(l)]),_:1}))],512),e[0]||(e[0]=_("div",{class:"fail_bar"},null,-1)),_("span",{class:"verify_tip",style:R({color:h(s)?"#fff":"transparent"})},N(h(s)?"验证通过":"请按住滑块拖动"),5)])}}});const J=T(X,[["__scopeId","data-v-2a260884"]]);export{J as S};
