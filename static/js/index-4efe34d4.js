import{x as M,aA as x,aG as q,aB as V,r as v,h as C,k as H,W as D,ag as f,y as m,z as I,A as _,u as y,G as S,H as h,P as k,M as P,D as z}from"./vue-44be93b5.js";import{_ as A}from"./index-502adb01.js";const G={class:"slider_verify_box"},N=M({__name:"index",props:x({width:{type:String,default:"250px"}},{status:{type:Boolean,default:!1},statusModifiers:{}}),emits:x(["onSuccess"],["update:status"]),setup(p,{expose:E,emit:L}){q(s=>({"3c1e9cbc":p.width}));const w=V(p,"status"),b=L,n=v(!1),l=v(!1),e=v();let c=0,d=0;const r=s=>{var t;(t=e.value)!=null&&t.contains(s.target)&&(d=s.x,l.value=!0)},a=()=>{if(e.value&&l.value){const s=document.querySelector(".slider_verify_box");if(l.value=!1,d=0,e.value.style.left!==(s==null?void 0:s.clientWidth)-e.value.clientWidth+"px"){const t=document.querySelector(".fail_bar");e.value.style.transition="all 0.5s",t.style.transition="all 0.5s",t.style.left="0px",e.value.style.left="0px",setTimeout(()=>{e.value&&(e.value.style.transition="none",t.style.transition="none")},500)}else n.value=!0}},i=s=>{const t=document.querySelector(".slider_verify_box");if(t!=null&&t.contains(s.target)){if(l.value){const o=s.x-c-(d-c),u=document.querySelector(".fail_bar");u.style.left=o+e.value.clientWidth+"px",o<=0?(n.value=!1,e.value.style.left="0px"):o>=(t==null?void 0:t.clientWidth)-e.value.clientWidth-10?(n.value=!0,e.value.style.left=(t==null?void 0:t.clientWidth)-e.value.clientWidth+"px"):(n.value=!1,e.value.style.left=o+"px")}}else a()},g=()=>{if(!e.value)return;const s=document.querySelector(".fail_bar");s&&(s.style.left="0px",e.value.style.left="0px",n.value=!1)};C(()=>n.value,()=>{n.value?(window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",i),w.value=!0,b("onSuccess")):(window.addEventListener("mousedown",r),window.addEventListener("mouseup",a),window.addEventListener("mousemove",i),w.value=!1)});const W=()=>{window.addEventListener("mousedown",r),window.addEventListener("mouseup",a),window.addEventListener("mousemove",i)};return H(()=>{e.value=document.querySelector(".slider_rocker"),c=e.value.getBoundingClientRect().x,W()}),E({name:"SliderVerify",reset:g}),D(()=>{window.removeEventListener("mousedown",r),window.removeEventListener("mouseup",a),window.removeEventListener("mousemove",i)}),(s,t)=>{const o=f("SwitchButton"),u=f("el-icon"),B=f("Select");return m(),I("div",G,[_("div",{ref_key:"rockerDom",ref:e,class:"slider_rocker"},[y(n)?(m(),S(u,{key:1},{default:h(()=>[k(B)]),_:1})):(m(),S(u,{key:0},{default:h(()=>[k(o)]),_:1}))],512),t[0]||(t[0]=_("div",{class:"fail_bar"},null,-1)),_("span",{class:"verify_tip",style:z({color:y(n)?"#fff":"#64748b"})},P(y(n)?"验证通过":"请按住滑块拖动"),5)])}}});const T=A(N,[["__scopeId","data-v-4a431399"]]);export{T as S};
