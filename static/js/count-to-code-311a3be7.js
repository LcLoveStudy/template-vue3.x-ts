import{u as w,g as j,f as G,r as N,w as V,j as A,d as B,b as H,o as D,a as E,c as $,U,K as X,ah as q,V as O,P as J,F as K,I as T,T as Q}from"./vue-ff40cb36.js";import{H as L}from"./index-af84855d.js";import{_ as M}from"./how-to-use-table.vue_vue_type_script_setup_true_lang-0fd9cc45.js";import"./elementPlus-d0603370.js";import"./elementIcons-69177a60.js";const R=e=>e===null?"null":e===void 0?"undefined":Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Y(e){return j()?(G(e),!0):!1}function i(e){return typeof e=="function"?e():w(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Z(e,r=!1,a="Timeout"){return new Promise((o,u)=>{setTimeout(r?()=>u(a):o,e)})}function P(e){return e}const ee={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]},te=Object.assign({},{linear:P},ee);function ne([e,r,a,o]){const u=(t,n)=>1-3*n+3*t,s=(t,n)=>3*n-6*t,c=t=>3*t,f=(t,n,l)=>((u(n,l)*t+s(n,l))*t+c(n))*t,d=(t,n,l)=>3*u(n,l)*t*t+2*s(n,l)*t+c(n),p=t=>{let n=t;for(let l=0;l<4;++l){const m=d(n,e,a);if(m===0)return n;const y=f(n,e,a)-t;n-=y/m}return n};return t=>e===r&&a===o?t:f(p(t),r,o)}function k(e,r,a){return e+a*(r-e)}function I(e){return(typeof e=="number"?[e]:e)||[]}function ae(e,r,a,o={}){var u,s;const c=i(r),f=i(a),d=I(c),p=I(f),t=(u=i(o.duration))!=null?u:1e3,n=Date.now(),l=Date.now()+t,m=typeof o.transition=="function"?o.transition:(s=i(o.transition))!=null?s:P,y=typeof m=="function"?m:ne(m);return new Promise(_=>{e.value=c;const S=()=>{var g;if((g=o.abort)!=null&&g.call(o)){_();return}const b=Date.now(),x=y((b-n)/t),h=I(e.value).map((W,v)=>k(d[v],p[v],x));Array.isArray(e.value)?e.value=h.map((W,v)=>{var C,F;return k((C=d[v])!=null?C:0,(F=p[v])!=null?F:0,x)}):typeof e.value=="number"&&(e.value=h[0]),b<l?requestAnimationFrame(S):(e.value=f,_())};S()})}function z(e,r={}){let a=0;const o=()=>{const s=i(e);return typeof s=="number"?s:s.map(i)},u=N(o());return V(o,async s=>{var c,f;if(i(r.disabled))return;const d=++a;if(r.delay&&await Z(i(r.delay)),d!==a)return;const p=Array.isArray(s)?s.map(i):i(s);(c=r.onStarted)==null||c.call(r),await ae(u,u.value,p,{...r,abort:()=>{var t;return d!==a||((t=r.abort)==null?void 0:t.call(r))}}),(f=r.onFinished)==null||f.call(r)},{deep:!0}),V(()=>i(r.disabled),s=>{s&&(a++,u.value=o())}),Y(()=>{a++}),A(()=>i(r.disabled)?o():u.value)}const re=B({name:"CountTo",__name:"index",props:{startVal:{type:Number,default:0},endVal:{type:Number,default:2023},duration:{type:Number,default:1500},autoplay:{type:Boolean,default:!0},fontSize:{type:Number,default:16},fontWeight:{type:Number,default:400},decimals:{type:Number,default:0,validator(e){return e>=0}},prefix:{type:String,default:""},suffix:{type:String,default:""},separator:{type:String,default:","},decimal:{type:String,default:"."},color:{type:String}},emits:["onStarted","onFinished"],setup(e,{emit:r}){const a=e,o=r,u=N(a.startVal),s=N(!1);let c=z(u);const f=A(()=>t(w(c)));H(()=>{u.value=a.startVal}),V([()=>a.startVal,()=>a.endVal],()=>{a.autoplay&&d()}),D(()=>{a.autoplay&&d()});function d(){p(),u.value=a.endVal}function p(){c=z(u,{disabled:s,duration:a.duration,onFinished:()=>o("onFinished"),onStarted:()=>o("onStarted"),transition:te.linear})}function t(n){if(!n&&n!==0)return"";const{decimals:l,decimal:m,separator:y,suffix:_,prefix:S}=a;n=Number(n).toFixed(l),n+="";const g=n.split(".");let b=g[0];const x=g.length>1?m+g[1]:"",h=/(\d+)(\d{3})/;if(y&&R(y)!=="number")for(;h.test(b);)b=b.replace(h,"$1"+y+"$2");return S+b+x+_}return(n,l)=>(E(),$("span",{style:X({color:e.color,fontSize:e.fontSize+"px",fontWeight:e.fontWeight})},U(f.value),5))}}),oe=T("h3",{class:"mt-6"},"示例",-1),ue=T("pre",{class:"w-200"},[Q("    "),T("code",{class:"language-html text-sm"},'\n    <CountTo\n      :start-val="100"\n      :end-val="2000"\n      color="green"\n      :font-size="30"\n      :font-weight="600"\n      prefix="$"\n    />\n    '),Q("\n  ")],-1),de=B({__name:"count-to-code",setup(e){D(()=>{L.highlightAll()});const r=N([{propName:"start-val",mean:"开始的值",type:"number",default:"0"},{propName:"end-val",mean:"目标值",type:"number",default:"2023"},{propName:"font-size",mean:"字体大小",type:"number",default:"16"},{propName:"font-weight",mean:"字体粗细",type:"number",default:"400"},{propName:"color",mean:"字体颜色",type:"string",default:"#000"},{propName:"duration",mean:"延续时间",type:"number",default:"1500"},{propName:"autoplay",mean:"是否自动播放",type:"boolean",default:"true"},{propName:"prefix",mean:"前缀",type:"string",default:"-"},{propName:"suffix",mean:"后缀",type:"string",default:"-"}]);return(a,o)=>{const u=q("el-card");return E(),$(K,null,[O(u,{class:"width-300"},{default:J(()=>[O(w(re),{"start-val":100,"end-val":2e3,color:"green","font-size":30,"font-weight":600,prefix:"$"})]),_:1}),oe,ue,O(M,{"how-to-use":w(r)},null,8,["how-to-use"])],64)}}});export{de as default};
