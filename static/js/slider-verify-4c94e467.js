import{d as V,aB as b,aH as q,aC as B,r as a,w as U,o as H,A as I,ai as x,a as S,c as M,I as n,u as r,O as L,P as k,V as m,U as P,K as R,D as T,T as E,F as $}from"./vue-0c3a7f5f.js";import{_ as A}from"./index-e620dafb.js";import{H as F}from"./index-f7db68f2.js";import{_ as O}from"./how-to-use-table.vue_vue_type_script_setup_true_lang-ee9f341d.js";import{E as z}from"./elementPlus-82eddbda.js";import"./leaflet-b33c52c4.js";import"./elementIcons-4b3a1ead.js";const D={class:"slider_verify_box"},J=V({__name:"index",props:b({width:{type:String,default:"250px"}},{status:{type:Boolean,default:!1},statusModifiers:{}}),emits:b(["onSuccess"],["update:status"]),setup(g,{expose:v,emit:i}){q(o=>({"48107fd8":g.width}));const p=B(g,"status"),h=i,s=a(!1),u=a(!1),e=a();let c=0,d=0;const _=o=>{var t;(t=e.value)!=null&&t.contains(o.target)&&(d=o.x,u.value=!0)},f=()=>{if(u.value){const o=document.querySelector(".slider_verify_box");u.value=!1,d=0,e.value.style.left!==(o==null?void 0:o.clientWidth)-e.value.clientWidth+"px"?(document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px"):s.value=!0}},y=o=>{const t=document.querySelector(".slider_verify_box");if(t!=null&&t.contains(o.target)){if(u.value){const l=o.x-c-(d-c),w=document.querySelector(".fail_bar");w.style.left=l+e.value.clientWidth+"px",l<=0?(s.value=!1,e.value.style.left="0px"):l>=(t==null?void 0:t.clientWidth)-e.value.clientWidth-10?(s.value=!0,e.value.style.left=(t==null?void 0:t.clientWidth)-e.value.clientWidth+"px"):(s.value=!1,e.value.style.left=l+"px")}}else f()},C=()=>{document.querySelector(".fail_bar").style.left="0px",e.value.style.left="0px",s.value=!1};U(()=>s.value,()=>{s.value?(window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",y),p.value=!0,h("onSuccess")):(window.addEventListener("mousedown",_),window.addEventListener("mouseup",f),window.addEventListener("mousemove",y),p.value=!1)});const N=()=>{window.addEventListener("mousedown",_),window.addEventListener("mouseup",f),window.addEventListener("mousemove",y)};return H(()=>{e.value=document.querySelector(".slider_rocker"),c=e.value.getBoundingClientRect().x,N()}),v({name:"SliderVerify",reset:C}),I(()=>{window.removeEventListener("mousedown",_),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",y)}),(o,t)=>{const l=x("SwitchButton"),w=x("el-icon"),W=x("Select");return S(),M("div",D,[n("div",{ref_key:"rockerDom",ref:e,class:"slider_rocker"},[r(s)?(S(),L(w,{key:1},{default:k(()=>[m(W)]),_:1})):(S(),L(w,{key:0},{default:k(()=>[m(l)]),_:1}))],512),t[0]||(t[0]=n("div",{class:"fail_bar"},null,-1)),n("span",{class:"verify_tip",style:R({color:r(s)?"#fff":"#000"})},P(r(s)?"验证通过":"请按住滑块拖动"),5)])}}});const K=A(J,[["__scopeId","data-v-1d1daba2"]]),j={class:"flex items-center"},se=V({__name:"slider-verify",setup(g){H(()=>{F.highlightAll()});const v=a(),i=a(!1),p=()=>{z.success("验证成功")},h=()=>{v.value.reset()},s=a([{propName:"v-model:status",mean:"验证状态",type:"boolean",default:"false"},{propName:"width",mean:"组件宽度,最小180px",type:"string",default:"250px"},{propName:"@on-success",mean:"验证成功时触发",type:"function",default:"-"},{propName:"reset",mean:"组件方法,重置状态(获取组件dom,调用reset方法)",type:"function",default:"-"}]);return(u,e)=>{const c=x("el-button");return S(),M($,null,[n("div",j,[m(r(K),{ref_key:"slider",ref:v,status:r(i),"onUpdate:status":e[0]||(e[0]=d=>T(i)?i.value=d:null),onOnSuccess:p},null,8,["status"]),m(c,{class:"ml-[1rem]",onClick:h},{default:k(()=>e[1]||(e[1]=[E("重置")])),_:1})]),e[2]||(e[2]=n("h3",{class:"mt-6"},"示例",-1)),e[3]||(e[3]=n("pre",{class:"w-200"},[E("    "),n("code",{class:"language-html text-sm"},'\n    <SliderVerify ref="slider" v-model:status="status" @on-success="successHandler"/>\n    <el-button class="ml-[1rem]" @click="resetVerify"/>重置</el-button/>\n    <script setup lang="ts">\n      const slider = ref()\n      const status = ref(false)\n      const successHandler = () => {\n        ElMessage.success(\'验证成功\')\n      }\n      const resetVerify = () => {\n        slider.value.reset()\n      }\n    <\/script>\n    '),E("\n  ")],-1)),m(O,{"how-to-use":r(s)},null,8,["how-to-use"])],64)}}});export{se as default};
